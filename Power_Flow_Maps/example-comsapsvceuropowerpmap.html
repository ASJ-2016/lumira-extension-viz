<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Hello World Extension</title>
        <!-- <<deps -->
        <script type="text/javascript" src="../../../libs/d3.v2.js"></script>
        <script type="text/javascript" src="../../../libs/require.js"></script>
        <script type="text/javascript" src="../../../libs/jquery.js"></script>
        
        <script type="text/javascript" src="../../../libs/sap.viz.js"></script>

        <!-- DO NOT CHANGE THE ORDER OF THE ABOVE SCRIPTS, OR INSERT ANYTHING BETWEEN THEM -->

        <!-- deps>> -->
        <script id="prepare" type="text/javascript">
            // Create and initialize the extension in an requireJS manner
             // Config the baseUrl for requireJS to find the specific module or file
            requirejs.config({
                 baseUrl : '../bundles/comsapsvcseuropowermap'
            });
            require([ 'comsapsvcseuropowermap-bundle' ], function() {
                //chart option
                var chartPoperties = {
                    
                    'Europe Power Map Module': {
                        borderColor: "none"
                    },
                    
                };

                //dataset used by the chart
                /*<<data*/
                var data =     {
                        "analysisAxis": [{
                            "index": 1,
                            "data": [{
                                "type": "Dimension",
                                "name": "MARKET_AREA_FROM",
                                "values": ["AUSTRIA", "AUSTRIA", "AUSTRIA", "AUSTRIA", "AUSTRIA", "Belgium", "Belgium", "Belgium", "Belgium", "Belgium", "Czech Republic", "Czech Republic", "Czech Republic", "Denmark", "Denmark", "Denmark", "Denmark", "Denmark", "Denmark", "Denmark", "Denmark", "Germany", "Germany", "Germany", "Germany", "Germany", "Germany", "Germany", "Italy", "Italy", "Italy", "Italy", "Italy", "Luxembourg", "Luxembourg", "Luxembourg", "Luxembourg", "Luxembourg", "Norway", "Norway", "Norway", "Norway", "Norway", "Norway", "Norway", "Norway", "Norway", "Sweden", "Sweden", "Sweden", "Switzerland", "Switzerland", "Switzerland", "Switzerland"]
                            }, {
                                "type": "Dimension",
                                "name": "from",
                                "values": ["AUT", "AUT", "AUT", "AUT", "AUT", "BEL", "BEL", "BEL", "BEL", "BEL", "CZE", "CZE", "CZE", "DNK", "DNK", "DNK", "DNK", "DNK", "DNK", "DNK", "DNK", "DEU", "DEU", "DEU", "DEU", "DEU", "DEU", "DEU", "ITA", "ITA", "ITA", "ITA", "ITA", "LUX", "LUX", "LUX", "LUX", "LUX", "NOR", "NOR", "NOR", "NOR", "NOR", "NOR", "NOR", "NOR", "NOR", "SWE", "SWE", "SWE", "CHE", "CHE", "CHE", "CHE"]
                            }, {
                                "type": "Dimension",
                                "name": "MARKET_AREA_TO",
                                "values": ["Czech Republic", "Germany", "Italy", "Norway", "Switzerland", "Denmark", "Germany", "Italy", "Luxembourg", "Norway", "AUSTRIA", "Germany", "Norway", "Belgium", "Denmark", "Germany", "Italy", "Luxembourg", "Norway", "Sweden", "Switzerland", "AUSTRIA", "Belgium", "Czech Republic", "Denmark", "Luxembourg", "Norway", "Switzerland", "AUSTRIA", "Denmark", "Italy", "Norway", "Switzerland", "Belgium", "Denmark", "Germany", "Luxembourg", "Norway", "AUSTRIA", "Belgium", "Czech Republic", "Denmark", "Germany", "Italy", "Luxembourg", "Norway", "Sweden", "Denmark", "Norway", "Sweden", "AUSTRIA", "Denmark", "Germany", "Italy"]
                            }, {
                                "type": "Dimension",
                                "name": "to",
                                "values": ["CZE", "DEU", "ITA", "NOR", "CHE", "DNK", "DEU", "ITA", "LUX", "NOR", "AUT", "DEU", "NOR", "BEL", "DNK", "DEU", "ITA", "LUX", "NOR", "SWE", "CHE", "AUT", "BEL", "CZE", "DNK", "LUX", "NOR", "CHE", "AUT", "DNK", "ITA", "NOR", "CHE", "BEL", "DNK", "DEU", "LUX", "NOR", "AUT", "BEL", "CZE", "DNK", "DEU", "ITA", "LUX", "NOR", "SWE", "DNK", "NOR", "SWE", "AUT", "DNK", "DEU", "ITA"]
                            }]
                        }],
                        "measureValuesGroup": [{
                            "index": 1,
                            "data": [{
                                "type": "Measure",
                                "name": "POWER",
                                "values": [
                                    [624439.3, 21251815.6, 9156988.2, 5179858.5, 319035.2, 1398340.5, 2222044.3, 553365.1, 2143114.1, 10872111.6, 7402878.5, 17582736.1, 20851516.5, 41345196.5, 91275903.3, 34584417.3, 35860212.8, 29613, 49006999.2, 11098432.1, 30149711.9, 2940009, 1927846.3, 1419795, 13103063.9, 2367066.5, 47439683.9, 1754229.6, 984836.9, 141994.3, 19107244.2, 1248739.5, 115600.4, 711812.3, 10157257.2, 397401.4, 8436734.5, 829048.3, 1156851.2, 249775.4, 108579.6, 18308032.9, 11423034.7, 5978046.8, 6057732.7, 109599565.5, 14074995.1, 8677961.7, 21907218.1, 16566490.9, 5433571.4, 841889.7, 31545870.5, 39301027.8]
                                ]
                            }]
                        }]
                    };
                var ds = new sap.viz.api.data.CrosstableDataset(); 
                ds.data(data);
                /*data>>*/

                //bindings used by the chart
                /*<<bindings*/
                var bindings =     [{
                        "feed": "comsapsvcseuropowermap.DS1",
                        "source": [{
                            "type": "analysisAxis",
                            "index": 1
                        }]
                    }, {
                        "feed": "comsapsvcseuropowermap.MS1",
                        "source": [{
                            "type": "measureValuesGroup",
                            "index": 1
                        }]
                    }];
                
                /*bindings>>*/
                
                function onTplLoad() {
                    //create chart after applying template
                    /*<<create*/
                     try {
                        var chart = sap.viz.api.core.createViz({
                            type : 'comsapsvcseuropowermap',
                            data : ds,
                            container : $("#chart"),
                            properties : chartPoperties,
                            /*<<bindingsdefine*/
                            bindings : bindings,
                           /*bindingsdefine>>*/
                        });
                    } catch (err) {
                        console.log(err);
                        return;
                    }
                    /*create>>*/
                    //listen the barData event raised from the extension
                    chart.on("barData", function(d) {
                        alert("Data: " + d.join(" = "));
                    });
                    $(window).resize(function(){
                        chart.size({
                            width: $("#chart").width(),
                            height: $("#chart").height()
                        })
                    });
                };
                function onTplFail() {
                };
                // set template loadPath
                /*<<template*/
                sap.viz.api.env.Resource.path("sap.viz.api.env.Template.loadPaths", ["../bundles/comsapsvcseuropowermap/comsapsvcseuropowermap-src/resources/templates"]);
                sap.viz.api.env.Template.set("sample", onTplLoad, onTplFail);
                    /*template>>*/
            });
        </script>
    </head>
    <body>
        <!-- <<container -->
        <div id="chart" style="position: absolute; left:0px; right: 0px; top:0px; bottom:0px; background-color: #ffffff"></div>
        <!-- container>> -->
    </body>
</html>    
    
